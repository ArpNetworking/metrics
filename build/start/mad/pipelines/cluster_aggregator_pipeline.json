{
  "name": "ClusterAggregatorPipeline",
  "timerStatistics": [
    "min",
    "median",
    "p90",
    "p95",
    "p99",
    "p99p9",
    "max",
    "count",
    "mean",
    "sum"
  ],
  "counterStatistics": [
    "min",
    "median",
    "p90",
    "p95",
    "p99",
    "p99p9",
    "max",
    "count",
    "mean",
    "sum"
  ],
  "gaugeStatistics": [
    "min",
    "median",
    "p90",
    "p95",
    "p99",
    "p99p9",
    "max",
    "count",
    "mean",
    "sum"
  ],
  "sources": [
    {
      "type": "com.arpnetworking.metrics.common.sources.FileSource",
      "name": "cluster_aggregator_query_log",
      "sourceFile": "../metrics/tsd/cluster-aggregator/logs/cluster-aggregator-query.log",
      "stateFile": "../metrics/tsd/cluster-aggregator/logs/cluster-aggregator-query.log.state",
      "parser": {
        "type": "com.arpnetworking.metrics.mad.parsers.JsonToRecordParser",
        "defaultService": "cluster_aggregator",
        "defaultCluster": "mad_dev",
        "defaultHost": "mad-test1.local"
      }
    }
  ],
  "sinks": [
    {
      "type": "com.arpnetworking.tsdcore.sinks.PeriodicStatisticsSink",
      "name": "cluster_aggregator_periodic_statistics_sink"
    },
    {
      "type": "com.arpnetworking.tsdcore.sinks.PeriodFilteringSink",
      "name": "period_filtering_cluster_aggregator_telemetry_sink",
      "excludeGreaterThan": "PT1S",
      "sink": {
        "type": "com.arpnetworking.tsdcore.sinks.TimeThresholdSink",
        "name": "time_threshold_cluster_aggregator_telemetry_sink",
        "threshold": "PT10M",
        "sink": {
          "type": "com.arpnetworking.tsdcore.sinks.TelemetrySink",
          "name": "cluster_aggregator_telemetry_sink"
        }
      }
    },
    {
      "type": "com.arpnetworking.tsdcore.sinks.PeriodFilteringSink",
      "name": "period_filtering_cluster_aggregator_cluster_sink",
      "excludeLessThan": "PT1M",
      "sink": {
        "type": "com.arpnetworking.tsdcore.sinks.TimeThresholdSink",
        "name": "time_threshold_cluster_aggregator_cluster_sink",
        "threshold": "PT10M",
        "logOnly": true,
        "sink": {
          "type": "com.arpnetworking.tsdcore.sinks.AggregationServerSink",
          "name": "cluster_aggregator_cluster_sink",
          "serverAddress": "localhost",
          "serverPort": 7065
        }
      }
    }
  ]
}
